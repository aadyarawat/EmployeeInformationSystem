<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough">

<ui:composition template="/template/template.xhtml">

	<ui:define name="content">
		<div align="center">
			<div id="dialog" style="display: none;">
				<h:form prependId="false">
					<table align="center">
						<caption>
							<b>Project Details!</b>
						</caption>
						<tr>
							<th align="right">Project Name:</th>
							<td><h:inputText value="#{managerBean.projectName}" /></td>
						</tr>
						<tr>
							<th align="right">Duration:</th>
							<td><h:inputText value="#{managerBean.projectDuration}" /></td>
						</tr>
						<tr>
							<td colspan="2" align="center"><h:commandButton
									value="Create Project!" action="#{managerBean.saveProject}" /></td>
						</tr>
					</table>
				</h:form>
			</div>

			<div>
				<h:form prependId="false">
					<table>
						<tr>
							<td>Projects</td>
							<td><h:selectOneMenu
									value="#{managerBean.projectDetails_Id}"
									id="selectedProjectName"
									valueChangeListener="#{managerBean.getUnallocatedProjectEmployees}"
									onchange="submit()">
									<f:selectItem itemLabel="-----Select-------" itemValue="-1" />
									<f:selectItems value="#{managerBean.projects}" var="project"
										itemLabel="#{project.projectName}"
										itemValue="#{project.projectDetails_Id}" />
								</h:selectOneMenu></td>
							<td colspan="2"><h:commandButton id="addProject"
									type="button" value="Add Project" class="myButton" /></td>
						</tr>
					</table>
					<table class="CSSTableGenerator tableSection" align="center">
						<thead>
							<tr align="center"
								style="background-color: rgb(4, 82, 134); color: white; height: 46px;">
								<th style="height: 46px; width: 180px;">Assign</th>
								<th style="width: 190px;">Employee Name</th>
								<th>Employee Id</th>
								<th>Email</th>

							</tr>
						</thead>
						<ui:repeat var="employee" value="#{managerBean.employees}">
							<tr align="center">
								<td><h:commandLink 	action="#{managerBean.assignProjectToEmployee}">
										<h:graphicImage value="images/Active_icon.jpg" height="30px" width="30px"/>
										<f:setPropertyActionListener value="#{employee}" target="#{managerBean.employee}" />
									</h:commandLink></td>
								<td>#{employee.firstName} #{employee.lastName}</td>
								<td>#{employee.yashEmployeeId}</td>
								<td>#{employee.email}</td>

							</tr>
						</ui:repeat>

					</table>

				</h:form>
			</div>


		</div>
	</ui:define>

</ui:composition>
</html>
